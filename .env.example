# =============================================================================
# EduStream Environment Configuration Template
# =============================================================================
# Copy this file to .env and fill in your actual values
# IMPORTANT: Never commit .env to version control!
#
# Quick Start:
#   Development: cp .env.development .env
#   Production:  cp .env.production .env && edit secrets
#   Testing:     Uses .env.test automatically
# =============================================================================

# =============================================================================
# DATABASE CONFIGURATION (Required)
# =============================================================================
DATABASE_URL=postgresql://postgres:postgres@db:5432/authapp
POSTGRES_DB=authapp
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your-secure-database-password

# =============================================================================
# REDIS CONFIGURATION (Required)
# =============================================================================
# Redis is used for: feature flags, OAuth state, rate limiting, account lockout
REDIS_URL=redis://redis:6379/0

# =============================================================================
# MINIO / S3 STORAGE (Required)
# =============================================================================
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=your-secure-minio-password
MINIO_ENDPOINT=http://minio:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=your-secure-minio-password
MINIO_BUCKET=tutor-assets
MINIO_PUBLIC_ENDPOINT=https://minio.yourdomain.com
MINIO_USE_SSL=false

# Avatar Storage (uses same MinIO instance)
AVATAR_STORAGE_ENDPOINT=http://minio:9000
AVATAR_STORAGE_ACCESS_KEY=minioadmin
AVATAR_STORAGE_SECRET_KEY=your-secure-minio-password
AVATAR_STORAGE_BUCKET=user-avatars
AVATAR_STORAGE_REGION=
AVATAR_STORAGE_PUBLIC_ENDPOINT=https://minio.yourdomain.com
AVATAR_STORAGE_USE_SSL=true
AVATAR_STORAGE_URL_TTL_SECONDS=300
AVATAR_STORAGE_DEFAULT_URL=https://placehold.co/300x300?text=Avatar

# Message Attachments Storage (uses same MinIO instance)
MESSAGE_ATTACHMENT_STORAGE_ENDPOINT=http://minio:9000
MESSAGE_ATTACHMENT_STORAGE_ACCESS_KEY=minioadmin
MESSAGE_ATTACHMENT_STORAGE_SECRET_KEY=your-secure-minio-password
MESSAGE_ATTACHMENT_STORAGE_BUCKET=message-attachments
MESSAGE_ATTACHMENT_STORAGE_PUBLIC_ENDPOINT=https://minio.yourdomain.com
MESSAGE_ATTACHMENT_STORAGE_USE_SSL=false

# =============================================================================
# APPLICATION SECURITY (Required - CHANGE IN PRODUCTION!)
# =============================================================================
# Generate with: python -c 'import secrets; print(secrets.token_hex(32))'
SECRET_KEY=cdb490d2f2417f5531584539619e1bc1320583a54859911e65797e86ad67fd65
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
BCRYPT_ROUNDS=12

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
# Comma-separated list of allowed origins
CORS_ORIGINS=https://yourdomain.com,http://localhost:3000

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_PER_MINUTE=60
REGISTRATION_RATE_LIMIT_PER_MINUTE=5
LOGIN_RATE_LIMIT_PER_MINUTE=10

# Account Lockout (Brute-force Protection)
ACCOUNT_LOCKOUT_MAX_ATTEMPTS=5
ACCOUNT_LOCKOUT_DURATION_SECONDS=900

# =============================================================================
# ENVIRONMENT & LOGGING
# =============================================================================
ENVIRONMENT=development
LOG_LEVEL=INFO

# =============================================================================
# DEFAULT USERS (For Development/Testing)
# =============================================================================
# Leave passwords empty for auto-generated secure passwords (check logs)
DEFAULT_ADMIN_EMAIL=admin@example.com
DEFAULT_ADMIN_PASSWORD=admin123
DEFAULT_OWNER_EMAIL=owner@example.com
DEFAULT_OWNER_PASSWORD=owner123
DEFAULT_TUTOR_EMAIL=tutor@example.com
DEFAULT_TUTOR_PASSWORD=tutor123
DEFAULT_STUDENT_EMAIL=student@example.com
DEFAULT_STUDENT_PASSWORD=student123

# =============================================================================
# STRIPE PAYMENT INTEGRATION (Required for payments)
# =============================================================================
# Get keys from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_test_51QfiqsP0KWjLqj7YourStripeSecretKeyHere
STRIPE_PUBLISHABLE_KEY=pk_test_51QfiqsP0KWjLqj7YourStripePublishableKeyHere
STRIPE_WEBHOOK_SECRET=whsec_jEy6xHq53Saaqh4BXFR8mXR6laIIyZfm
STRIPE_CONNECT_CLIENT_ID=ca_TnDXd60tCHyuR7vqoVTFq5OOKZVkSpgN
STRIPE_CURRENCY=usd
STRIPE_SUCCESS_URL=https://yourdomain.com/bookings/{booking_id}?payment=success&session_id={CHECKOUT_SESSION_ID}
STRIPE_CANCEL_URL=https://yourdomain.com/bookings/{booking_id}?payment=cancelled
STRIPE_CONNECT_REFRESH_URL=https://yourdomain.com/tutor/earnings?connect=refresh
STRIPE_CONNECT_RETURN_URL=https://yourdomain.com/tutor/earnings?connect=success

# =============================================================================
# GOOGLE OAUTH (Required for Google Sign-In)
# =============================================================================
# Get credentials from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=87651593504-6q57onf8u3ibpk6vb5k8u39eqgr26bj8.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=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
GOOGLE_REDIRECT_URI=https://api.yourdomain.com/api/v1/auth/google/callback
GOOGLE_CALENDAR_REDIRECT_URI=https://api.yourdomain.com/api/v1/integrations/calendar/callback
OAUTH_STATE_SECRET=40a91bc1fc2038a3349340a634ee752803dc3c0f1b246fcd668b4e9e6d106e9c

# =============================================================================
# BREVO EMAIL SERVICE (Required for email notifications)
# =============================================================================
# Get API key from: https://app.brevo.com/settings/keys/api
BREVO_API_KEY=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
BREVO_SENDER_EMAIL=noreply@yourdomain.com
BREVO_SENDER_NAME=EduStream
EMAIL_ENABLED=true

# =============================================================================
# ZOOM INTEGRATION (Optional)
# =============================================================================
# Create Server-to-Server OAuth app at: https://marketplace.zoom.us/develop/create
ZOOM_CLIENT_ID=your_zoom_client_id
ZOOM_CLIENT_SECRET=your_zoom_client_secret
ZOOM_ACCOUNT_ID=your_zoom_account_id
ZOOM_REDIRECT_URI=https://api.yourdomain.com/api/v1/integrations/zoom/callback
ZOOM_ENABLED=true

# =============================================================================
# FRONTEND URLS
# =============================================================================
FRONTEND_URL=https://yourdomain.com
FRONTEND_LOGIN_SUCCESS_URL=https://yourdomain.com/dashboard
FRONTEND_LOGIN_ERROR_URL=https://yourdomain.com/login?error=oauth_failed
NEXT_PUBLIC_API_URL=https://api.yourdomain.com
NEXT_PUBLIC_LOG_LEVEL=INFO
NODE_ENV=production

# =============================================================================
# SENTRY ERROR MONITORING (Optional)
# =============================================================================
# Get DSN from: https://sentry.io/settings/projects/YOUR_PROJECT/keys/
SENTRY_DSN=
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1

# =============================================================================
# FEATURE FLAGS
# =============================================================================
PAYMENTS_ENABLED=true
EMAILS_ENABLED=true
ZOOM_ENABLED=true

# =============================================================================
# DISTRIBUTED TRACING (Optional)
# =============================================================================
TRACING_ENABLED=false
TRACING_EXPORTER=console
TRACING_SERVICE_NAME=edustream-api
TRACING_SAMPLE_RATE=1.0
JAEGER_AGENT_HOST=jaeger
JAEGER_AGENT_PORT=6831
OTLP_ENDPOINT=http://jaeger:4317

# =============================================================================
# VALIDATION SETTINGS
# =============================================================================
PASSWORD_MIN_LENGTH=6
PASSWORD_MAX_LENGTH=128
EMAIL_MAX_LENGTH=254
MAX_BOOKING_HOURS=8

# =============================================================================
# PAGINATION
# =============================================================================
DEFAULT_PAGE_SIZE=50
MAX_PAGE_SIZE=100
