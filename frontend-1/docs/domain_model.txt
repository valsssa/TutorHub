
# Domain Model (Frontend View)

This document outlines the core business entities, their relationships, and lifecycle states as represented in the frontend application state.

## 1. Business Entities

### **User**
The base actor in the system.
*   **Roles:** `STUDENT`, `TUTOR`, `ADMIN`.
*   **Key Fields:** `id`, `name`, `role`, `balance` (Student), `earnings` (Tutor).

### **Tutor Profile**
The "product" listing in the marketplace.
*   **Identity:** Links to a `User` (Tutor role).
*   **Properties:** `hourlyRate`, `subject`, `topics`, `bio`, `education`.
*   **Metrics:** `rating` (0-5), `reviews` (count).
*   **Availability:** A collection of ISO date strings representing open slots.

### **Session (Booking)**
The transaction unit connecting a Student and a Tutor.
*   **Participants:** `studentId`, `tutorId`.
*   **Details:** `date` (ISO timestamp), `subject`, `price`.
*   **State:** `status`.

### **Verification Request**
A compliance artifact submitted by a Tutor for Admin review.
*   **Payload:** Documents (PDF/Images).
*   **State:** `status`.

### **Chat Thread**
A communication channel between two Users.
*   **Components:** Metadata (`lastMessage`, `unreadCount`) and a collection of `ChatMessage`.

---

## 2. Relationships

*   **User (Student) 1 : N Session**
    *   A student can book multiple sessions.
*   **User (Tutor) 1 : N Session**
    *   A tutor conducts multiple sessions.
*   **User (Student) 1 : N Review**
    *   A student writes reviews.
*   **User (Tutor) 1 : N Review**
    *   A tutor receives reviews.
*   **User (Tutor) 1 : 1 Verification Request**
    *   A tutor typically has one active verification flow.
*   **User 1 : N Chat Thread**
    *   A user can have multiple conversations.

---

## 3. Lifecycle States

### **Session Lifecycle**
1.  **Draft/Slot:** Exists as an available time in `Tutor.availability`.
2.  **Upcoming:** Created when a Student confirms booking (`bookingStep === 3`).
3.  **Completed:** Transitioned automatically after the time passes (mock logic) or manually marked.
4.  **Reviewed:** Transitioned when the Student submits a review (`isReviewed: true`).
5.  **Cancelled:** Terminal state if either party cancels (not fully implemented in UI but supported in type).

### **Verification Lifecycle**
1.  **Unverified:** Default state for new Tutors.
2.  **Pending:** Transitioned when Tutor submits documents via `VerificationManager`.
3.  **Approved:** Admin action. Triggers `Tutor.isVerified = true`.
4.  **Rejected:** Admin action. Returns Tutor to a state where they must resubmit.

---

## 4. Read-Only vs. Editable Fields (Frontend Perspective)

### **Tutor Entity**
| Field | Access | Notes |
| :--- | :--- | :--- |
| `id` | **Read-Only** | System generated. |
| `rating` | **Read-Only** | Computed aggregate of reviews. |
| `reviews` | **Read-Only** | Computed count. |
| `isVerified` | **Read-Only** | Controlled by Admin/Verification flow. |
| `name` | **Editable** | Via Profile Editor. |
| `bio` | **Editable** | Via Profile Editor. |
| `hourlyRate` | **Editable** | Via Profile Editor. |
| `availability` | **Editable** | Via Schedule Manager. |

### **Session Entity**
| Field | Access | Notes |
| :--- | :--- | :--- |
| `price` | **Read-Only** | Snapshotted from Tutor rate at booking time. |
| `date` | **Editable** | Can be rescheduled (logic implied). |
| `status` | **System** | Transitions based on time or actions (Join/Cancel). |

### **User (Student) Entity**
| Field | Access | Notes |
| :--- | :--- | :--- |
| `balance` | **System/Editable** | Updated via "Top Up" (Editable) or Booking (System decrement). |
| `savedTutorIds` | **Editable** | Toggled via Heart icon. |
