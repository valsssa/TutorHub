# =============================================================================
# EduStream - TEST Environment
# =============================================================================
# Used by docker-compose.test.yml and pytest

# =============================================================================
# ENVIRONMENT
# =============================================================================
ENVIRONMENT=test
NODE_ENV=test
LOG_LEVEL=WARNING
DEBUG=false

# =============================================================================
# DATABASE (In-memory for speed, or test DB)
# =============================================================================
DATABASE_URL=postgresql://postgres:postgres@db:5432/authapp_test
POSTGRES_DB=authapp_test
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
REDIS_URL=redis://redis:6379/1

# =============================================================================
# SECURITY (Fixed for reproducible tests)
# =============================================================================
SECRET_KEY=cdb490d2f2417f5531584539619e1bc1320583a54859911e65797e86ad67fd65
OAUTH_STATE_SECRET=40a91bc1fc2038a3349340a634ee752803dc3c0f1b246fcd668b4e9e6d106e9c
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=5
BCRYPT_ROUNDS=4

# =============================================================================
# URLS & CORS
# =============================================================================
FRONTEND_URL=http://localhost:3000
NEXT_PUBLIC_API_URL=http://localhost:8000
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# =============================================================================
# EXTERNAL SERVICES (All disabled/mocked for tests)
# =============================================================================

# Stripe (disabled)
STRIPE_SECRET_KEY=sk_test_mock
STRIPE_PUBLISHABLE_KEY=pk_test_mock
STRIPE_WEBHOOK_SECRET=whsec_mock
STRIPE_CONNECT_CLIENT_ID=ca_mock
STRIPE_CURRENCY=usd
STRIPE_SUCCESS_URL=http://localhost:3000/bookings/{booking_id}?payment=success&session_id={CHECKOUT_SESSION_ID}
STRIPE_CANCEL_URL=http://localhost:3000/bookings/{booking_id}?payment=cancelled

# Google OAuth (disabled)
GOOGLE_CLIENT_ID=mock.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=mock_secret
GOOGLE_REDIRECT_URI=http://localhost:8000/api/v1/auth/google/callback
GOOGLE_CALENDAR_REDIRECT_URI=http://localhost:8000/api/v1/integrations/calendar/callback

# Email (disabled)
BREVO_API_KEY=
EMAIL_ENABLED=false
BREVO_SENDER_EMAIL=test@localhost
BREVO_SENDER_NAME=EduStream Test

# Zoom (disabled)
ZOOM_CLIENT_ID=
ZOOM_CLIENT_SECRET=
ZOOM_ACCOUNT_ID=

# Sentry (disabled)
SENTRY_DSN=

# =============================================================================
# MINIO (Use test bucket)
# =============================================================================
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin123
MINIO_ENDPOINT=http://minio:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin123
MINIO_BUCKET=test-assets
MINIO_PUBLIC_ENDPOINT=http://localhost:9000
MINIO_USE_SSL=false

AVATAR_STORAGE_ENDPOINT=http://minio:9000
AVATAR_STORAGE_ACCESS_KEY=minioadmin
AVATAR_STORAGE_SECRET_KEY=minioadmin123
AVATAR_STORAGE_BUCKET=test-avatars
AVATAR_STORAGE_PUBLIC_ENDPOINT=http://localhost:9000
AVATAR_STORAGE_USE_SSL=false

MESSAGE_ATTACHMENT_STORAGE_ENDPOINT=http://minio:9000
MESSAGE_ATTACHMENT_STORAGE_ACCESS_KEY=minioadmin
MESSAGE_ATTACHMENT_STORAGE_SECRET_KEY=minioadmin123
MESSAGE_ATTACHMENT_STORAGE_BUCKET=test-attachments
MESSAGE_ATTACHMENT_STORAGE_PUBLIC_ENDPOINT=http://localhost:9000
MESSAGE_ATTACHMENT_STORAGE_USE_SSL=false

# =============================================================================
# RATE LIMITING (Disabled for tests)
# =============================================================================
RATE_LIMIT_ENABLED=false

# =============================================================================
# DEFAULT USERS (Fixed for tests)
# =============================================================================
DEFAULT_ADMIN_EMAIL=admin@test.com
DEFAULT_ADMIN_PASSWORD=testadmin123
DEFAULT_OWNER_EMAIL=owner@test.com
DEFAULT_OWNER_PASSWORD=testowner123
DEFAULT_TUTOR_EMAIL=tutor@test.com
DEFAULT_TUTOR_PASSWORD=testtutor123
DEFAULT_STUDENT_EMAIL=student@test.com
DEFAULT_STUDENT_PASSWORD=teststudent123

# =============================================================================
# SKIP STARTUP TASKS
# =============================================================================
SKIP_STARTUP_MIGRATIONS=true
